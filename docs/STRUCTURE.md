# Структура проекта

```
TrueGen_bot_w_001/
├── app/                    # Основной пакет приложения
│   ├── __init__.py         # Инициализация пакета
│   ├── bot.py              # Основной модуль бота
│   ├── config.py           # Конфигурация приложения
│   ├── docgen.py           # Генерация документов Word
│   ├── handlers.py         # Обработчики команд и сообщений
│   ├── logger.py           # Настройка логирования
│   ├── models.py           # Модели данных Pydantic
│   ├── parser.py           # Парсинг входящих сообщений
│   └── preview.py          # Форматирование предпросмотра
├── data/                   # Данные приложения
│   └── .gitkeep           
├── docs/                   # Документация
│   └── STRUCTURE.md        # Этот файл
├── logs/                   # Логи приложения (создается автоматически)
│   └── bot.log            
├── out/                    # Сгенерированные документы
│   └── .gitkeep           
├── templates/              # Шаблоны документов
│   └── act_template.docx   # Шаблон акта (пример)
├── tests/                  # Тесты
│   └── __init__.py        
├── .env.example           # Пример файла с переменными окружения
├── .gitignore             # Игнорируемые файлы Git
├── main.py                # Точка входа (устаревшая, используйте run_bot.py)
├── README.md              # Основная документация
├── requirements.txt        # Зависимости
├── requirements-dev.txt    # Зависимости для разработки
└── run_bot.py             # Основной скрипт запуска
```

## Описание ключевых файлов

### app/bot.py
Основной модуль бота, содержащий настройку и запуск бота.

### app/config.py
Конфигурация приложения, включая:
- Пути к директориям
- Настройки бота
- Настройки логирования
- Клавиатуры

### app/handlers.py
Обработчики команд и сообщений бота.

### app/logger.py
Настройка логирования с поддержкой вывода в консоль и файл.

### app/docgen.py
Модуль для генерации документов Word на основе шаблонов.

### app/parser.py
Парсинг входящих сообщений и извлечение структурированных данных.

## Переменные окружения

Создайте файл `.env` в корне проекта со следующими переменными:

```ini
# Обязательные настройки
BOT_TOKEN=your_telegram_bot_token_here  # Получить у @BotFather

# Опциональные настройки
DEBUG=False  # Включить режим отладки (True/False)
```

### Автоматически создаваемые директории
При первом запуске бота будут созданы следующие директории (если их нет):
- `out/` - для сгенерированных документов
- `logs/` - для логов
- `templates/` - для шаблонов документов

## Логирование

Логи сохраняются в файл `logs/bot.log` с ротацией при достижении 5 МБ (сохраняются до 3 резервных копий).

### Формат логов
```
[ВРЕМЯ] [УРОВЕНЬ] - СООБЩЕНИЕ
```

### Уровни логирования
- DEBUG - отладочная информация
- INFO - основная информация о работе
- WARNING - предупреждения
- ERROR - ошибки
- CRITICAL - критические ошибки

### Примеры логов
```
[2025-06-10 21:45:12] INFO - Бот запущен
[2025-06-10 21:45:20] INFO - Получено новое сообщение от пользователя 123456789
[2025-06-10 21:45:22] ERROR - Ошибка при обработке сообщения: ...
```

### Настройка логирования
Настройки логирования задаются в коде (файл `app/logger.py`) и включают:
- Ротацию логов (5 МБ на файл, до 3 файлов)
- Вывод в консоль и файл
- Форматирование с временными метками
- Кодировку UTF-8
